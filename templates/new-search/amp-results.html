{% extends "new-search/base2.html" %}
{% block content %}



<div class="nhsuk-width-container">
    <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-full">
            <div>
                <form id="new-search-form" method="post"><input type="hidden" name="_csrf"
                        value="mqQ58ifpWeY-Ar790t0aq2En70y_exc01JFzfzMc47XjUlk9rpIIl0OIa4UTNImYtPAuklcfwi2OS3YZ4KRCTQAt2tGFNGAL">




                    <h1 class="nhsuk-u-margin-bottom-5 nhsuk-u-margin-left-3" id="page-landing-heading">
                        Search results <span id="search-summary"></span></h1>



                    <div class="nhsuk-grid-column-one-quarter">
                        <div class="nhsuk-form-group">
                            <label class="nhsuk-label" for="search-type">
                                Search type
                            </label>

                            <select class="nhsuk-select search-type" id="search-type" name="searchType">
                                <option value="VMP">VMP</option>
                                <option value="AMP" selected="selected">AMP</option>
                                <option value="Supplier">Supplier</option>
                                <option value="VTM">VTM</option>
                                <option value="Ingredient">Ingredient</option>
                            </select>
                        </div>
                    </div>

                    <!-- Serch Input field-->
                    <div class="nhsuk-grid-column-three-quarters">
                        <div class="nhsuk-form-group autocomplete-wrapper nhsuk-u-width-full"
                            id="autocomplete-results__form-group">
                            <label class="nhsuk-label" for="search-term">Search
                                term
                            </label>

                            <input class="nhsuk-input nhsuk-u-width-full" id="search-term" type="text" role="combobox"
                                aria-autocomplete="list" aria-describedby="search-field__assistiveHint"
                                aria-owns="autocomplete-results-container"
                                aria-controls="autocomplete-results__announcer" aria-expanded="false" name="searchTerm"
                                value="" autocomplete="off">


                        </div>
                    </div>

                    <div class="nhsuk-grid-column-full" id="row-supplier-input" style="display: none;">
                        <div class="nhsuk-form-group">
                            <label class="nhsuk-label" for="search-supplier-input">Supplier (optional)</label>
                            <input class="nhsuk-input" id="search-supplier-input" type="text" name="supplier" value="">
                        </div>
                    </div>


                    <div class="nhsuk-grid-column-full">
                        <details class="nhsuk-details">
                            <summary class="nhsuk-details__summary">
                                <span class="nhsuk-details__summary-text">Apply filters to search</span>
                            </summary>
                            <div class="nhsuk-details__text">

                                <div class="nhsuk-form-group">
                                    <fieldset class="nhsuk-fieldset">
                                        <legend class="nhsuk-fieldset__legend">Filter by</legend>
                                        <div class="nhsuk-checkboxes">

                                            <div class="nhsuk-grid-column-one-quarter nhsuk-u-padding-top-2">
                                                <div class="nhsuk-checkboxes__item">
                                                    <input type="hidden" name="_showPCDD" value="on"><input
                                                        class="nhsuk-checkboxes__input" id="checkbox-show-pcdd-items"
                                                        type="checkbox" checked="checked" name="showPCDD" value="true">
                                                    <label class="nhsuk-label nhsuk-checkboxes__label"
                                                        for="checkbox-show-pcdd-items">
                                                        PCDD
                                                    </label>
                                                </div>
                                                <div class="nhsuk-checkboxes__item">
                                                    <input type="hidden" name="_showSCDD" value="on"><input
                                                        class="nhsuk-checkboxes__input" id="checkbox-show-scdd-items"
                                                        type="checkbox" checked="checked" name="showSCDD" value="true">
                                                    <label class="nhsuk-label nhsuk-checkboxes__label"
                                                        for="checkbox-show-scdd-items">
                                                        SCDD
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="nhsuk-grid-column-one-quarter nhsuk-u-padding-top-2">
                                                <div class="nhsuk-checkboxes__item">
                                                    <input type="hidden" name="_showValidItems" value="on"><input
                                                        class="nhsuk-checkboxes__input" id="checkbox-show-valid-items"
                                                        type="checkbox" checked="checked" name="showValidItems"
                                                        value="true">
                                                    <label class="nhsuk-label nhsuk-checkboxes__label"
                                                        for="checkbox-show-valid-items">
                                                        Valid
                                                    </label>
                                                </div>

                                                <div class="nhsuk-checkboxes__item">
                                                    <input type="hidden" name="_showInvalidItems" value="on"><input
                                                        class="nhsuk-checkboxes__input" id="checkbox-show-invalid-items"
                                                        type="checkbox" checked="checked" name="showInvalidItems"
                                                        value="true">
                                                    <label class="nhsuk-label nhsuk-checkboxes__label"
                                                        for="checkbox-show-invalid-items">
                                                        Invalid
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="nhsuk-grid-column-one-quarter nhsuk-u-padding-top-2">
                                                <div class="nhsuk-checkboxes__item">
                                                    <input type="hidden" name="_showAvailable" value="on"><input
                                                        class="nhsuk-checkboxes__input" id="checkbox-show-avail-items"
                                                        type="checkbox" checked="checked" name="showAvailable"
                                                        value="true">
                                                    <label class="nhsuk-label nhsuk-checkboxes__label"
                                                        for="checkbox-show-avail-items">
                                                        Available
                                                    </label>
                                                </div>


                                                <div class="nhsuk-checkboxes__item">
                                                    <input type="hidden" name="_showUnavailable" value="on"><input
                                                        class="nhsuk-checkboxes__input" id="checkbox-show-unavail-items"
                                                        type="checkbox" checked="checked" name="showUnavailable"
                                                        value="true">
                                                    <label class="nhsuk-label nhsuk-checkboxes__label"
                                                        for="checkbox-show-unavail-items">
                                                        Unavailable
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="nhsuk-grid-column-one-quarter nhsuk-u-padding-top-2">
                                                <div class="nhsuk-checkboxes__item">
                                                    <input type="hidden" name="_matchTermsExact" value="on"><input
                                                        class="nhsuk-checkboxes__input" id="checkbox-match-name-exact"
                                                        type="checkbox" checked="checked" name="matchTermsExact"
                                                        value="true">
                                                    <label class="nhsuk-label nhsuk-checkboxes__label"
                                                        for="checkbox-match-name-exact">
                                                        Match terms
                                                    </label>
                                                </div>

                                            </div>

                                        </div>
                                    </fieldset>
                                </div>
                            </div>
                        </details>
                    </div>


                    <input type="hidden" value="100" id="size" name="size">
                    <div class="nhsuk-grid-column-one-third  nhsuk-u-float-right" id="button-search">

                        <button type="button" class="nhsuk-button nhsuk-u-float-right" id="search-button">
                            Search
                        </button>




                    </div>




                    <input type="hidden" value="1" id="page" name="page">
                    <!--Attributes from previous search for infinite scroll-->
                    <div class="nhsuk-u-visually-hidden">
                        <p id="searched-search-term"></p>
                        <p id="searched-search-type" var="VMP"></p>
                        <p id="searched-supplier"></p>
                        <p id="searched-show-PCDD" var="true"></p>
                        <p id="searched-show-SCDD" var="true"></p>
                        <p id="searched-show-valid" var="true"></p>
                        <p id="searched-show-invalid" var="true"></p>
                        <p id="searched-show-available" var="true"></p>
                        <p id="searched-show-unavailable" var="true"></p>
                        <p id="searched-match-term-exact" var="true"></p>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>



<div class="nhsuk-width-container-fluid">
    <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-full">



            <div class="nhsuk-grid-column-full">
                <details class="nhsuk-details">
                    <summary class="nhsuk-details__summary">
                        <span class="nhsuk-details__summary-text">Customize table view</span>
                    </summary>
                    <div class="nhsuk-details__text">

                        <div class="nhsuk-form-group">
                            <fieldset class="nhsuk-fieldset">
                                <div class="nhsuk-hint" id="contact-hint">
                                    Add or remove attribute columns by ticking or unticking them
                                </div>
                                <div class="nhsuk-checkboxes">

                                    <div class="nhsuk-grid-column-one-quarter nhsuk-u-padding-top-2">
                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_showName" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-show-dictionary"
                                                type="checkbox" checked="checked" name="showPCDD" value="true" disabled>
                                            <label class="nhsuk-label nhsuk-checkboxes__label"
                                                for="checkbox-show-dictionary">
                                                Dictionary
                                            </label>
                                        </div>
                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_showSCDD" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-show-name" type="checkbox"
                                                checked="checked" name="showSCDD" value="true" disabled>
                                            <label class="nhsuk-label nhsuk-checkboxes__label" for="checkbox-show-name">
                                                Name
                                            </label>
                                        </div>

                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_matchTermsExact" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-start-date" type="checkbox"
                                                checked="checked" name="matchTermsExact" value="true">
                                            <label class="nhsuk-label nhsuk-checkboxes__label"
                                                for="checkbox-start-date">
                                                Start date
                                            </label>
                                        </div>
                                    </div>

                                    <div class="nhsuk-grid-column-one-quarter nhsuk-u-padding-top-2">
                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_showValidItems" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-show-snomed-code"
                                                type="checkbox" checked="checked" name="showValidItems" value="true">
                                            <label class="nhsuk-label nhsuk-checkboxes__label"
                                                for="checkbox-show-snomed-code">
                                                SNOMED Code
                                            </label>
                                        </div>

                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_showInvalidItems" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-show-ppa-code"
                                                type="checkbox" name="showInvalidItems" value="true">
                                            <label class="nhsuk-label nhsuk-checkboxes__label"
                                                for="checkbox-show-ppa-code">
                                                PPA Code
                                            </label>
                                        </div>

                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_showInvalidItems" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-show-supplier"
                                                type="checkbox" name="showInvalidItems" value="true">
                                            <label class="nhsuk-label nhsuk-checkboxes__label"
                                                for="checkbox-show-supplier">
                                                Supplier
                                            </label>
                                        </div>


                                    </div>

                                    <div class="nhsuk-grid-column-one-quarter nhsuk-u-padding-top-2">
                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_showAvailable" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-show-invalid"
                                                type="checkbox" name="showAvailable" value="true">
                                            <label class="nhsuk-label nhsuk-checkboxes__label"
                                                for="checkbox-show-invalid">
                                                Invalid
                                            </label>
                                        </div>


                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_showUnavailable" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-show-uex" type="checkbox"
                                                name="showUnavailable" value="true">
                                            <label class="nhsuk-label nhsuk-checkboxes__label" for="checkbox-show-uex">
                                                Unextractable
                                            </label>
                                        </div>
                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_showUnavailable" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-show-unavailable"
                                                type="checkbox" name="showUnavailable" value="true">
                                            <label class="nhsuk-label nhsuk-checkboxes__label"
                                                for="checkbox-show-unavailable">
                                                Unavailable
                                            </label>
                                        </div>
                                    </div>

                                    <div class="nhsuk-grid-column-one-quarter nhsuk-u-padding-top-2">
                                        <div class="nhsuk-checkboxes__item">
                                            <input type="hidden" name="_matchTermsExact" value="on"><input
                                                class="nhsuk-checkboxes__input" id="checkbox-end-date" type="checkbox"
                                                name="matchTermsExact" value="true">
                                            <label class="nhsuk-label nhsuk-checkboxes__label" for="checkbox-end-date">
                                                End date
                                            </label>
                                        </div>


                                    </div>

                                </div>
                            </fieldset>
                        </div>
                    </div>
                </details>
            </div>
            <button class="nhsuk-button nhsuk-button--secondary nhsuk-u-float-right" id="reset-button" type="button">
                Reset table
            </button>

            <table role="table-responsive" class="nhsuk-table-responsive " data-module="moj-sortable-table">
                <caption class="nhsuk-table__caption nhsuk-u-visually-hidden">Search Results</caption>
                <thead role="rowgroup" class="nhsuk-table__head">
                    <tr role="row">
                        <th role="columnheader" class="" scope="col" aria-sort="ascending">
                            Dictionary<span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>
                        <th role="columnheader" class="" scope="col" aria-sort="ascending">
                            Name<span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>
                        <th role="columnheader" class="" scope="col" aria-sort="none">
                            Start date <span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>
                        <th role="columnheader" class="" scope="col" aria-sort="none">
                            SNOMED Code<span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>
                        <th role="columnheader" class="" scope="col" aria-sort="none">
                            PPA Code<span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>
                        <th role="columnheader" class="" scope="col" aria-sort="none">
                            Supplier <span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>
                        <th role="columnheader" class="" scope="col" aria-sort="none">
                            INV <span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>
                        <th role="columnheader" class="" scope="col" aria-sort="none">
                            UEX <span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>
                        <th role="columnheader" class="" scope="col" aria-sort="none">
                            U/A <span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>
                        <th role="columnheader" class="" scope="col" aria-sort="none">
                            End date <span class="sort-indicator" aria-hidden="true">⇅</span>
                        </th>


                    </tr>
                </thead>
                <tbody class="nhsuk-table__body">
                    <!--ROWS GO HERE-->
                    <tr class="nhsuk-table__row" role="row">
                        <!-- Dictionary PCDD -->
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag">PCDD</span>
                            </span>
                        </td>
                        <!-- Name -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/102">Paracetamol</a>
                        </td>
                        <!-- Start date -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>12-03-2007
                        </td>
                        <!-- SNOMED Code -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>386661006
                        </td>
                        <!-- PPA Code -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <!-- Supplier -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span><a
                                href="/supplier/hollister-ltd">Hollister Ltd</a>
                        </td>
                        <!-- INV -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <!-- UEX -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <!-- U/A -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <!-- End date -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>01-02-3456
                        </td>
                    </tr>

                    <tr class="nhsuk-table__row" role="row">
                        <!-- Dictionary SCDD -->
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag nhsuk-tag--white">SCDD</span>
                            </span>
                        </td>
                        <!-- Name -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/115">Amoxicillin</a>
                        </td>
                        <!-- Start date -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>08-07-2011
                        </td>
                        <!-- SNOMED Code -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>372687004
                        </td>
                        <!-- PPA Code -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <!-- Supplier -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span> <a
                                href="/supplier/sandoz-ltd">Sandoz Ltd</a>
                        </td>
                        <!-- INV -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <!-- UEX -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                        </td>
                        <!-- U/A -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                        </td>
                        <!-- End date -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>15-06-2020
                        </td>
                    </tr>

                    <tr class="nhsuk-table__row" role="row">
                        <!-- Dictionary PCDD -->
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag">PCDD</span>
                            </span>
                        </td>
                        <!-- Name -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/128">Ibuprofen</a>
                        </td>
                        <!-- Start date -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>21-09-2005
                        </td>
                        <!-- SNOMED Code -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>372729009
                        </td>
                        <!-- PPA Code -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <!-- Supplier -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span> <a
                                href="/supplier/sandoz-ltd">Sandoz Ltd</a>
                        </td>
                        <!-- INV -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                        </td>
                        <!-- UEX -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <!-- U/A -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <!-- End date -->
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>01-02-3456
                        </td>
                    </tr>
                    <tr class="nhsuk-table__row" role="row">
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag nhsuk-tag--white">SCDD</span>
                            </span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/140">Clarithromycin</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>14-02-2010
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>372688004
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span> <a
                                href="/supplier/sandoz-ltd">Boots</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>01-02-3456
                        </td>
                    </tr>

                    <tr class="nhsuk-table__row" role="row">
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag">PCDD</span>
                            </span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/152">Metformin</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>22-11-2005
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>372729009
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span> <a
                                href="/supplier/sandoz-ltd">Boots</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>12-05-2018
                        </td>
                    </tr>

                    <tr class="nhsuk-table__row" role="row">
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag">PCDD</span>
                            </span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/163">Salbutamol</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>30-06-2003
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>372756004
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span> <a
                                href="/supplier/sandoz-ltd">Asda</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>01-02-3456
                        </td>
                    </tr>

                    <tr class="nhsuk-table__row" role="row">
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag nhsuk-tag--white">SCDD</span>
                            </span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/174">Warfarin</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>01-01-2008
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>372690001
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span> <a
                                href="/supplier/sandoz-ltd">Morrisons</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>20-10-2022
                        </td>
                    </tr>

                    <tr class="nhsuk-table__row" role="row">
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag">PCDD</span>
                            </span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/185">Insulin Glargine</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>17-04-2012
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>372702007
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span> <a
                                href="/supplier/sandoz-ltd">Asda</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>01-02-3456
                        </td>
                    </tr>

                    <tr class="nhsuk-table__row" role="row">
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag nhsuk-tag--white">SCDD</span>
                            </span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/196">Simvastatin</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>05-05-2006
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>372690004
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span> <a
                                href="/supplier/sandoz-ltd">Sandoz Ltd</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>30-09-2019
                        </td>
                    </tr>

                    <tr class="nhsuk-table__row" role="row">
                        <td role="cell" class="nhsuk-table__cell" style="word-wrap: break-word">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Dictionary</span>
                            <span class="nhsuk-u-font-size-16">
                                <span class="nhsuk-tag">PCDD</span>
                            </span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Name</span>
                            <a href="/vtm/207">Cetirizine</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Start date</span>19-08-2009
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">SNOMED Code</span>372714003
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">PPA Code</span>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">Supplier</span> <a
                                href="/supplier/sandoz-ltd">Boots</a>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">INV</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">UEX</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">U/A</span>
                            <svg class="nhsuk-icon nhsuk-icon__tick-colour-nhsuk-green"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path stroke="#007f3b" stroke-width="4" stroke-linecap="round" d="M6 12l4 4 8-8" />
                            </svg>
                        </td>
                        <td role="cell" class="nhsuk-table__cell">
                            <span class="nhsuk-table-responsive__heading" aria-hidden="true">End date</span>01-02-3456
                        </td>
                    </tr>




                </tbody>
            </table>




        </div>
    </div>

</div>


<script>
    document.getElementById("search-button").addEventListener("click", function () {
        const searchType = document.getElementById("search-type").value;
        const searchTerm = document.getElementById("search-term").value;

        // Construct URL based on selected search type
        let basePath = "/new-search/index"; // default
        switch (searchType) {
            case "VMP":
                basePath = "/new-search/vmp-results";
                break;
            case "AMP":
                basePath = "/new-search/amp-results";
                break;
            case "Supplier":
                basePath = "/new-search/supplier-results";
                break;
            case "VTM":
                basePath = "/new-search/vtm-results";
                break;
            case "Ingredient":
                basePath = "/new-search/ingredient-results";
                break;
        }

        const params = new URLSearchParams({
            searchTerm: searchTerm,
            searchType: searchType
        });

        // Redirect
        window.location.href = `${basePath}?${params.toString()}`;
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const table = document.querySelector("[data-module='moj-sortable-table']");
        if (!table) return;

        const headers = table.querySelectorAll("th");
        headers.forEach((header, index) => {
            // Remove existing sort indicators if they already exist
            const existingIndicator = header.querySelector(".sort-indicator");
            if (existingIndicator) {
                existingIndicator.remove();
            }

            // Create and append a new sort indicator
            let sortIndicator = document.createElement("span");
            sortIndicator.className = "sort-indicator";
            sortIndicator.setAttribute("aria-hidden", "true");
            sortIndicator.innerHTML = "⇅"; // Default state
            header.appendChild(sortIndicator);

            header.addEventListener("click", function () {
                const isAscending = header.getAttribute("aria-sort") === "ascending";
                sortTableByColumn(table, index, !isAscending);
            });
        });

        function sortTableByColumn(table, columnIndex, ascending) {
            const tbody = table.querySelector("tbody");
            const rows = Array.from(tbody.querySelectorAll("tr"));

            rows.sort((rowA, rowB) => {
                const cellA = rowA.children[columnIndex].getAttribute("data-sort-value")
                    || rowA.children[columnIndex].innerText.trim();
                const cellB = rowB.children[columnIndex].getAttribute("data-sort-value")
                    || rowB.children[columnIndex].innerText.trim();

                const compare = !isNaN(cellA) && !isNaN(cellB) ? cellA - cellB : cellA.localeCompare(cellB,
                    undefined, { numeric: true });

                return ascending ? compare : -compare;
            });

            rows.forEach(row => tbody.appendChild(row));

            // Reset all headers
            table.querySelectorAll("th").forEach(th => {
                th.setAttribute("aria-sort", "none");
                const indicator = th.querySelector(".sort-indicator");
                if (indicator) {
                    indicator.innerHTML = "⇅"; // Reset icon
                }
            });

            // Set the sorted column
            headers[columnIndex].setAttribute("aria-sort", ascending ? "ascending" : "descending");
            headers[columnIndex].querySelector(".sort-indicator").innerHTML = ascending ? "↑" : "↓";
        }
    });
</script>

<script>
    // Read the query params from the URL
    const params = new URLSearchParams(window.location.search);
    const searchTerm = params.get("searchTerm");
    const searchType = params.get("searchType");

    // Format and inject into the page
    const summaryText = `for (${searchType}) ${searchTerm} `;
    document.getElementById("search-summary").textContent = summaryText;

    // 2. Populate the input field
    const inputEl = document.getElementById("search-term");
    if (inputEl && searchTerm) {
        inputEl.value = searchTerm;
    }
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Map your checkbox IDs to the zero‑based column index in the table
        const columnIndexMap = {
            "checkbox-show-dictionary": 0,    // Dictionary
            "checkbox-show-name": 1,          // Name
            "checkbox-start-date": 2,             // Start date
            "checkbox-show-snomed-code": 3,   // SNOMED Code
            "checkbox-show-ppa-code": 4,      // PPA Code
            "checkbox-show-supplier": 5,           // Supplier
            "checkbox-show-invalid": 6,       // INV
            "checkbox-show-uex": 7,           // UEX
            "checkbox-show-unavailable": 8,   // U/A (Unavailable)
            "checkbox-end-date": 9          // End date
        };

        const table = document.querySelector("table");
        if (!table) return;

        function toggleColumnByIndex(index, show) {
            // Hide/show the <th>
            const th = table.querySelector(`thead tr`).children[index];
            if (th) th.style.display = show ? "" : "none";

            // Hide/show every <td> in that index
            table.querySelectorAll("tbody tr").forEach(row => {
                const cell = row.children[index];
                if (cell) cell.style.display = show ? "" : "none";
            });
        }

        // Wire up each checkbox
        Object.entries(columnIndexMap).forEach(([checkboxId, colIndex]) => {
            const checkbox = document.getElementById(checkboxId);
            if (!checkbox) return;

            // Initialize visibility
            toggleColumnByIndex(colIndex, checkbox.checked);

            // Re‑toggle on change
            checkbox.addEventListener("change", () => {
                toggleColumnByIndex(colIndex, checkbox.checked);
            });
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const searchTypeSelect = document.getElementById('search-type');
        const supplierInputRow = document.getElementById('row-supplier-input');

        function toggleSupplierInput() {
            if (searchTypeSelect.value === 'AMP') {
                supplierInputRow.style.display = 'block';
            } else {
                supplierInputRow.style.display = 'none';
            }
        }

        // Run once on page load in case AMP is pre-selected
        toggleSupplierInput();

        // Listen for changes
        searchTypeSelect.addEventListener('change', toggleSupplierInput);
    });
</script>

<script>
document.getElementById('reset-button').addEventListener('click', function () {
  // Simply reloads the page, preserving query parameters
  window.location.reload();
});
</script>
{% endblock %}