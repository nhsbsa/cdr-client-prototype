{% extends "tce-2465/base2.html" %}
{% block content %}
<div class="nhsuk-grid-row">
    <div id="content-pane" class="nhsuk-grid-column-full">



        <span class="nhsuk-caption-l" id="update-name-sub-heading">Update current name</span>
        <span class="nhsuk-u-visually-hidden"> - </span>
        <h1 class="nhsuk-heading-xl" id="update-name-heading">Abacavir</h1>


        <form method="post">
            <input name="_csrf"
                value="JXI79WdTFyx2RAOW2bLatPgn2rBdinTXc4rOlx-_BtmeBlAnFRcLxl9kIEpbd2DwuJ_uhM1B99Fp6UP6Qeis8ybaMu_6Y2kf"
                type="hidden">



            <div class="nhsuk-grid-row">
                <div class="nhsuk-grid-column-full name-mobile-view">
                    <div id="abbreviated-name-warning">
                        <div class="nhsuk-warning-callout">
                            <h2 class="nhsuk-warning-callout__label">
                                <span role="text">
                                    <span class="nhsuk-u-visually-hidden">Important: </span>
                                    Warning
                                </span>
                            </h2>
                            <p>If name value is greater than 60 characters, abbreviated name may be
                                needed.</p>
                        </div>
                    </div>

                    <!--Current Value-->
                    <div class="nhsuk-grid-column-full update-box">
                        <fieldset class="nhsuk-fieldset fieldset-wrap" id="name-0">
                            <legend class="nhsuk-fieldset__legend--l update-general-heading" id="name-0-legend-value">
                                Name details
                            </legend>
                            <div class="nhsuk-grid-column-full">
                                <div class="nhsuk-u-margin-right-2">

                                    <legend id="name-0-current-name-legend" class="nhsuk-fieldset__legend--m">
                                        Current name
                                    </legend>

                                    <!--Existing Option-->
                                    <div class="nhsuk-form-group nhsuk-u-margin-top-4" id="name-container">
                                        <label class="nhsuk-label" for="name-0-current-name">Value</label>
                                        <div>

                                        </div>
                                        <input class="nhsuk-input name-input" id="name-0-current-name" value="Abacavir"
                                            name="values[0].name">
                                    </div>
                                </div>
                            </div>

                            <div>

                                <div class="nhsuk-grid-column-one-half">
                                    <legend id="name-0-name-basis-legend" class="nhsuk-fieldset__legend--m">
                                        Name basis
                                    </legend>


                                    <div class="nhsuk-form-group">
                                        <label class="nhsuk-label" for="update-name-input-name-basis">Value</label>

                                        <div>

                                        </div>
                                        <select class="nhsuk-select" id="update-name-input-name-basis"
                                            autofocus="autofocus" name="values[0].nameBasis">

                                            <option id="nhsuk-select-update-name-input-name-basis-item0" value="RINN"
                                                selected="selected">rINN - Recommended International Non-proprietary
                                            </option>
                                            <option id="nhsuk-select-update-name-input-name-basis-item1" value="BAN">BAN
                                                - British Approved Name</option>
                                            <option id="nhsuk-select-update-name-input-name-basis-item2" value="BANM">
                                                BANM - British Approved Name (Modified)</option>
                                            <option id="nhsuk-select-update-name-input-name-basis-item3" value="INNM">
                                                INNM - International Non-proprietary Name (Modified)</option>
                                            <option id="nhsuk-select-update-name-input-name-basis-item4" value="PINN">
                                                pINN - Proposed International Non-proprietary Name</option>
                                            <option id="nhsuk-select-update-name-input-name-basis-item5" value="USAN">
                                                USAN - United States Adopted Name</option>
                                            <option id="nhsuk-select-update-name-input-name-basis-item6" value="OTHER">
                                                Other</option>







                                        </select>


                                    </div>


                                </div>

                                <div class="nhsuk-grid-column-one-half">
                                    <legend id="name-0-name-change-legend" class="nhsuk-fieldset__legend--m">
                                        Name change reason
                                    </legend>

                                    <div class="nhsuk-form-group">
                                        <label class="nhsuk-label" for="update-name-input-name-change">Value</label>

                                        <div>

                                        </div>
                                        <select class="nhsuk-select" id="update-name-input-name-change"
                                            autofocus="autofocus" name="values[0].nameChange">

                                            <option id="nhsuk-select-update-name-input-name-change-item0" value="BLANK">
                                            </option>
                                            <option id="nhsuk-select-update-name-input-name-change-item1"
                                                value="REPLACEMENT_OF_A_TEMPORARY_NAME">Replacement of a temporary name
                                            </option>
                                            <option id="nhsuk-select-update-name-input-name-change-item2"
                                                value="NEW_APPROVED_AENERIC_NAME_AVAILABLE">New approved generic name
                                                available</option>
                                            <option id="nhsuk-select-update-name-input-name-change-item3"
                                                value="BASIS_OF_NAME_CHANGED">Basis of name changed</option>
                                            <option id="nhsuk-select-update-name-input-name-change-item4" value="OTHER">
                                                Other</option>





                                        </select>


                                    </div>

                                </div>

                            </div>

                            <!--Start Date-->
                            <div class="nhsuk-grid-column-one-half">
                                <legend id="name-0-start-date-legend" class="nhsuk-fieldset__legend--m">
                                    Start date
                                </legend>

                                <div class="visually-hidden" aria-live="polite" id="start-date-hidden-0"></div>


                                <div class="nhsuk-form-group">

                                    <div>

                                    </div>
                                    <div>

                                    </div>
                                    <div>

                                    </div>
                                    <div>

                                    </div>
                                    <div class="nhsuk-date-input" id="name-0-start-date">
                                        <div class="nhsuk-date-input__item">
                                            <div class="nhsuk-form-group">
                                                <label class="nhsuk-label nhsuk-date-input__label"
                                                    for="name-0-start-date-day"><span
                                                        class="nhsuk-u-visually-hidden">Start date </span>Day</label>
                                                <input
                                                    class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2 js-paste-date"
                                                    inputmode="numeric" maxlength="2" id="name-0-start-date-day"
                                                    type="text" name="values[0].startDate.day" value="08">
                                            </div>
                                        </div>
                                        <div class="nhsuk-date-input__item">
                                            <div class="nhsuk-form-group">
                                                <label class="nhsuk-label nhsuk-date-input__label"
                                                    for="name-0-start-date-month"><span
                                                        class="nhsuk-u-visually-hidden">Start date </span>Month</label>
                                                <input
                                                    class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2 js-paste-date"
                                                    inputmode="numeric" maxlength="2" id="name-0-start-date-month"
                                                    type="text" name="values[0].startDate.month" value="12">
                                            </div>
                                        </div>
                                        <div class="nhsuk-date-input__item">
                                            <div class="nhsuk-form-group">
                                                <label class="nhsuk-label nhsuk-date-input__label"
                                                    for="name-0-start-date-year"><span
                                                        class="nhsuk-u-visually-hidden">Start date </span>Year</label>
                                                <input
                                                    class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4 js-paste-date"
                                                    inputmode="numeric" maxlength="4" id="name-0-start-date-year"
                                                    type="text" name="values[0].startDate.year" value="2004">
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>

                            <!--EndDate-->
                            <div class="nhsuk-grid-column-one-half">
                                <legend id="name-0-end-date-legend" class="nhsuk-fieldset__legend--m">
                                    End date
                                </legend>

                                <div class="nhsuk-form-group">

                                    <div>

                                    </div>
                                    <div>

                                    </div>
                                    <div>

                                    </div>
                                    <div>

                                    </div>
                                    <div class="nhsuk-date-input" id="name-0-end-date">
                                        <div class="nhsuk-date-input__item">
                                            <div class="nhsuk-form-group">
                                                <label class="nhsuk-label nhsuk-date-input__label"
                                                    for="name-0-end-date-day"><span class="nhsuk-u-visually-hidden">End
                                                        date </span>Day</label>
                                                <input
                                                    class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2 js-paste-date"
                                                    inputmode="numeric" maxlength="2" id="name-0-end-date-day"
                                                    type="text" name="values[0].endDate.day" value="01">
                                            </div>
                                        </div>
                                        <div class="nhsuk-date-input__item">
                                            <div class="nhsuk-form-group">
                                                <label class="nhsuk-label nhsuk-date-input__label"
                                                    for="name-0-end-date-month"><span
                                                        class="nhsuk-u-visually-hidden">End date </span>Month</label>
                                                <input
                                                    class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2 js-paste-date"
                                                    inputmode="numeric" maxlength="2" id="name-0-end-date-month"
                                                    type="text" name="values[0].endDate.month" value="02">
                                            </div>
                                        </div>
                                        <div class="nhsuk-date-input__item">
                                            <div class="nhsuk-form-group">
                                                <label class="nhsuk-label nhsuk-date-input__label"
                                                    for="name-0-end-date-year"><span class="nhsuk-u-visually-hidden">End
                                                        date </span>Year</label>
                                                <input
                                                    class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4 js-paste-date"
                                                    inputmode="numeric" maxlength="4" id="name-0-end-date-year"
                                                    type="text" name="values[0].endDate.year" value="3456">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <button class="nhsuk-button nhsuk-button--reverse" type="button"
                                onclick="setLastDayOfPreviousMonth(this)">
                                End Attribute
                            </button>

                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>


            <button class="nhsuk-button nhsuk-button--primary" id="submit" name="_eventId_submit" type="submit">Continue
            </button>

        </form>
    </div>
</div>

<script>
    function setLastDayOfPreviousMonth(button) {
        // Find the nearest parent with class "nhsuk-date-input"
        const dateContainer = button.closest('.nhsuk-grid-column-one-half')
            ?.querySelector('.nhsuk-date-input');

        if (!dateContainer) return;

        const dayInput = dateContainer.querySelector('input[id$="-day"]');
        const monthInput = dateContainer.querySelector('input[id$="-month"]');
        const yearInput = dateContainer.querySelector('input[id$="-year"]');

        if (!dayInput || !monthInput || !yearInput) return;

        // Calculate yesterday's date instead of last day of previous month
        const today = new Date();
        const yesterday = new Date(today);
        yesterday.setDate(today.getDate() - 1);

        // Pad values for consistency
        const day = String(yesterday.getDate()).padStart(2, '0');
        const month = String(yesterday.getMonth() + 1).padStart(2, '0'); // Month is 0-indexed
        const year = yesterday.getFullYear();

        // Set values
        dayInput.value = day;
        monthInput.value = month;
        yearInput.value = year;
    }
</script>


{% endblock %}